
<div class ="container">
 <h2 class ="mt-3">投稿詳細</h2>
 <div class ="row">
   <div class ="col-lg-5 mt-4">
    <% if @post.image.attached? %>
     <%= image_tag @post.image, size: "300x300" %>
    <% else %>
     <%= image_tag 'no-image', size: "300x300" %>
    <% end %>
   </div>

   <div class ="col-lg-7 mt-4">
    <table class ="table table-borderless">
      <tr>
       <th class ="col-lg-3">タイトル</th>
       <th><%= @post.title %></th>
      </tr>
      <tr>
       <th class ="col-lg-3">概要</th>
       <th><%= @post.body %></th>
      </tr>
      <tr>
       <th class ="col-lg-3">タグ</th>
       <th>
        <% @post_tags.each do |tag| %>
         <%= tag.name %>
         <%= "(#{tag.posts.count})" %>
        <% end %>
       </th>
      </tr>
      <tr>
       <th class ="col-lg-3">評価</th>
       <th>
        <span id ="show_star">
        </span>
       </th>
      </tr>
      <tr>
       <th class ="col-lg-3">郵便番号</th>
       <th><%= @post.postal_code %></th>
      </tr>
      <tr>
       <th class ="col-lg-3">住所</th>
       <th><%= @post.address %></th>
      </tr>
    </table>
    <div>
     <% if @post.user == current_user %>
      <%= link_to '編集する', edit_post_path(@post), class: "btn btn-success offset-lg-1" %>
      <%= link_to '削除する', post_path(@post), method: :delete, "data-confirm" => "本当に削除しますか?", class: "btn btn-danger" %>
     <% end %>
    </div>
   </div>

 </div>
</div>

<script>
       var show_elem = document.querySelector('#show_star');
         // scriptファイルをどのidの部分に配置するかを指定
       var show_opt = {
        starOn: "<%= asset_path('star-on.png') %>",
        starOff: "<%= asset_path('star-off.png') %>",
        readOnly: true,
        score: <%= @post.rate %>
         //星画像の指定などのオプションをここに記述,
        };
      raty(show_elem,show_opt);
        //application.jsの20行目のratyを使用している
</script>